<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>XO-Tube Turbo</title>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; text-align: center; margin: 0; padding: 10px; }
        
        /* Contenedor que "recorta" la interfaz de YouTube */
        .reproductor-fijo {
            position: relative;
            width: 100%;
            max-width: 560px;
            height: 315px;
            margin: 0 auto;
            overflow: hidden; /* Esto es lo que esconde los botones de YT */
            border: 2px solid #333;
            background: #111;
        }

        iframe {
            position: absolute;
            top: -50px; /* Esconde la parte de arriba de YT */
            left: 0;
            width: 100%;
            height: calc(100% + 100px); /* Agranda el video para que el recorte funcione */
            pointer-events: none; /* Evita clics accidentales en la interfaz de YT */
        }

        .controles { margin-top: 15px; display: none; }
        
        input { background: #222; color: #0f0; border: 1px solid #0f0; padding: 10px; width: 80%; margin-bottom: 10px; }
        
        button { 
            background: #0f0; color: #000; border: none; padding: 10px 15px; 
            font-weight: bold; cursor: pointer; margin: 5px; border-radius: 3px;
        }

        .btn-calidad { background: #0088ff; color: white; }
        .btn-fs { background: #ffaa00; color: black; }
    </style>
</head>
<body>

    <h2>XO-TUBE LITE</h2>
    <input type="text" id="urlInput" placeholder="Pega el link aquí">
    <br>
    <button onclick="cargar()">CARGAR</button>

    <div id="playerBox" class="reproductor-fijo" style="display:none;">
        <iframe id="vid" src="" frameborder="0"></iframe>
    </div>

    <div id="ctrls" class="controles">
        <button class="btn-calidad" onclick="cambiarCalidad('small')">144p</button>
        <button class="btn-calidad" onclick="cambiarCalidad('medium')">360p</button>
        <button class="btn-fs" onclick="irPantallaCompleta()">PANTALLA COMPLETA</button>
    </div>

    <p id="msg" style="font-size: 0.7em; color: #666;">Controlado por interfaz nativa XO</p>

<script>
    var currentId = "";

    function cargar() {
        var url = document.getElementById('urlInput').value;
        var id = "";
        
        if (url.includes("v=")) id = url.split("v=")[1].split("&")[0];
        else if (url.includes("youtu.be/")) id = url.split("youtu.be/")[1].split("?")[0];
        else return alert("Link inválido");

        currentId = id;
        document.getElementById('playerBox').style.display = "block";
        document.getElementById('ctrls').style.display = "block";
        
        // Cargamos con parámetros que quitan casi todo
        actualizarIframe('small');
    }

    function actualizarIframe(calidad) {
        // vq=calidad intenta forzar la resolución
        // controls=0 quita los botones originales de YouTube
        var embed = "https://www.youtube.com/embed/" + currentId + 
                    "?autoplay=1&controls=0&modestbranding=1&rel=0&vq=" + calidad;
        document.getElementById('vid').src = embed;
    }

    function cambiarCalidad(c) {
        actualizarIframe(c);
        document.getElementById('msg').innerText = "Calidad cambiada a: " + c;
    }

    function irPantallaCompleta() {
        var el = document.getElementById('playerBox');
        if (el.requestFullscreen) el.requestFullscreen();
        else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
        else if (el.mozRequestFullScreen) el.mozRequestFullScreen();
    }
</script>

</body>
</html>
